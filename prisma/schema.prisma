generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Video {
  id           String          @id @default(uuid()) @db.Uuid
  tiktokId     String          @unique @map("tiktok_id")
  createTime   DateTime        @map("create_time")
  coverVideo   String          @map("coverVideo")
  webVideoUrl  String          @map("web_video_url")
  shareCount   Int             @map("share_count")
  likeCount    Int             @map("like_count") 
  playCount    Int             @map("play_count")
  collectCount Int             @map("collect_count")
  commentCount Int             @map("comment_count")

  hashtags     VideoHashtag[]
  isAd         Boolean         @default(false)

  @@map("videos")
}

model Hashtag {
  id       Int             @id @default(autoincrement())
  name     String          @unique

  videos   VideoHashtag[]

  @@map("hashtags")
}

model n8n_chat_histories {
  id         Int    @id @default(autoincrement())
  session_id String
  message    Json   
  @@map("n8n_chat_histories")
}


model VideoHashtag {
  videoId   String  @db.Uuid
  hashtagId Int

  video     Video   @relation(fields: [videoId], references: [id])
  hashtag   Hashtag @relation(fields: [hashtagId], references: [id])

  @@id([videoId, hashtagId])
  @@map("video_hashtags")
}
