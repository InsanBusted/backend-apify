generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Video {
  id           String          @id @default(uuid()) @db.Uuid
  createTime   DateTime        @map("create_time")
  webVideoUrl  String          @map("web_video_url")
  shareCount   Int             @map("share_count")
  playCount    Int             @map("play_count")
  collectCount Int             @map("collect_count")
  commentCount Int             @map("comment_count")

  hashtags     VideoHashtag[]

  @@map("videos")
}

model Hashtag {
  id       Int             @id @default(autoincrement())
  name     String          @unique

  videos   VideoHashtag[]

  @@map("hashtags")
}

model VideoHashtag {
  videoId   String  @db.Uuid
  hashtagId Int

  video     Video   @relation(fields: [videoId], references: [id])
  hashtag   Hashtag @relation(fields: [hashtagId], references: [id])

  @@id([videoId, hashtagId])
  @@map("video_hashtags")
}
